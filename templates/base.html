<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.app_name }}{{ config.title_separator }}{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        @font-face {
            font-family: 'Digital';
            src: url('/static/font/font.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        :root {
            --theme-color: #9b5de5;
        }
        
        .header {
            background-color: var(--theme-color) !important;
        }
        /* 覆盖头部左侧布局：上下一列，首行横排 */
        .header-left { display: flex; flex-direction: column; align-items: flex-start; gap: 6px; }
        .header-left-row { display: flex; align-items: center; gap: 15px; }
        .line-sub-info { display: block; font-size: 14px; color: #ffffffcc; }
    </style>
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    {% block head %}{% endblock %}
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="header-left-row">
                <!-- <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" class="logo"> -->
                <span class="line-info">{% if line_name %}{% if line_name.startswith('line_') %}{{ line_name[5:] }}号线{% else %}{{ line_name }}{% endif %}{% endif %}<br><p style="font-size: 12px; text-align: center;">Line{% if line_name %}{% if line_name.startswith('line_') %}{{ line_name[5:] }}{% else %}{{ line_name }}{% endif %}{% endif %}</p></span>
            </div>
            <div class="line-sub-info">{% block header_subtitle %}{% endblock %}</div>
        </div>
        <div class="header-center">
            <h1 class="title">{% block page_title %}{% endblock %}</h1>
        </div>
        <div class="header-right">
            <span class="time" id="current-time">error:time</span>
            {% if door_side %}<span class="door-info">{% if door_side == '本侧' %}本侧开门{% else %}对侧开门{% endif %}</span>{% endif %}
            {% if door_side %}<span class="door-info">Doors will open on {% if door_side == '本侧' %}this{% else %}the opposite{% endif %} side</span>{% endif %}
        </div>
    </header>

    <main class="content">
        {% block content %}{% endblock %}
    </main>

    {% block scripts %}{% endblock %}
    <script>
        // 实时更新时间显示
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}`;
            
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
        }
        
        // 页面加载时立即更新时间
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            // 每分钟更新一次时间
            setInterval(updateTime, 60000);
        });
    </script>
</body>
</html>